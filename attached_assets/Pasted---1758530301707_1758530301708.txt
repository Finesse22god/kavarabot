Важно

Ничего нового не придумывать и не добавлять. Вернуть работоспособность существующих экранов и логики ровно «как было». Дизайн, тексты, поведение — оставить как в проекте.

Использовать существующие файлы/компоненты/ручки. Если чего-то не хватает — значит сломалось: найти и починить, а не переписывать с нуля.

Экраны/вкладки (как на скриншотах):
Главная, Каталог (сейчас вечная загрузка), Корзина, Профиль → Данные / Заказы / Избранное / Лояльность (промокод) / Контакты.

Цель работ

Каталог снова загружается и работает «как раньше»: список, карточки, пагинация/фильтры/поиск — только то, что уже реализовано в коде.

Профиль: редактирование сохраняется и отображается.

Избранное: добавление/удаление/отображение, состояние сохраняется между сессиями.

Промокоды: генерация и применение — согласно текущей реализации (валидаторы, статусы, лимиты).

Корзина: восстановить существующее поведение (добавление/удаление/подсчёты), если есть регрессии.

Проверить всё приложение и закрыть блокирующие ошибки/регрессии без расширения функционала.

Как работать (обязательно):

Сначала воспроизвести проблемы на Replit и собрать факты: шаги, network, логи сервера и клиента.

Найти root cause по цепочке: UI → фронт → API → БД/конфиги.

Вносить минимальные точечные фиксы. Любой «рефактор» — только если без него не починить, и отдельно обоснован.

Каждый фикс — отдельный коммит с понятным сообщением и ссылками на строки.

После фикса — проверка в рантайме (сними спиннеры, дождись данных) + короткие тесты там, где уже есть тестовая инфраструктура. Новые тесты — только на чинящиеся места, без построения сложного каркаса.

Проверки по зонам (ориентир):

Каталог:

Разобраться, почему спиннер не уходит: битый эндпоинт, CORS, схема ответа изменилась, пустые env, ошибка в кешировании/пагинации, падение парсинга.

Синхронизировать контракт фронт↔бэк по фактическому коду (не меняя дизайн/UX).

Обработать пустые ответы/ошибки так, как уже предусмотрено компонентами.

Профиль / Данные: PATCH/PUT сохраняет и возвращает актуальные данные; валидации и сообщения — как в текущих компонентах.

Избранное: идемпотентность по userId+itemId, отсутствие дублей, корректное начальное состояние после перезахода.

Промокоды / Лояльность: генерация/применение по текущим правилам; корректная обработка «не найден/истёк/исчерпан/не подходит».

Корзина: добавить/удалить/кол-во/итоги — согласно текущей логике.

Контакты/FAQ: просто убедиться, что рендерятся/отправка (если реализована) не падает.

API, конфиги и TG WebApp:

Проверить и зафиксировать фактические маршруты/схемы на основании кода. Ничего не менять по названиям и формату, только починить несоответствия/ошибки.

Проверить .env и значения, необходимые для каталога/профиля/избранного/промокодов; если пусто — вывести в лог понятную ошибку и описать, что именно нужно заполнить.

Верификация Telegram initData и извлечение userId — использовать существующую реализацию; если сломано — починить.

Артефакты на выходе (обязательно):

reports/fix-report.md — короткие записи по каждому фикс-юниту:

Заголовок; Статус: REPRODUCED → FIXED;

Шаги воспроизведения; Ожидалось/Фактически;

Root cause (1–2 фразы);

Решение (кратко) + минимальный DIFF (только изменённые строки/файлы);

Чем проверено (шаги/скрин/curl).

Коммиты/PR только с минимальными правками; без новых фич и без лишних зависимостей.

Если причиной оказались переменные окружения — добавить/обновить /.env.example без добавления новых фич-флагов.

Критерии приёмки (Definition of Done):

Каталог открывается, данные приходят, спиннер уходит; поиск/фильтры/пагинация работают ровно как в текущих компонентах; нет ошибок в console/network.

Профиль: изменения сохраняются и сразу видны в UI.

Избранное: стабильные операции, состояние корректно после перезахода.

Промокоды: генерация/применение работают по текущим правилам, корректные сообщения об ошибках из существующих текстов.

Корзина: базовые сценарии проходят.

Ноль критических ошибок в логах по базовому маршруту «Главная → Каталог → Карточка/Корзина → Профиль → Лояльность».

Никаких новых функций/экранов/перекроек UI не добавлено.

Порядок действий:

Запустить в Replit, воспроизвести зависшие места (каталог/профиль/избранное/промокоды).

Локализовать причины и составить список минимальных фиксов.

Внести фиксы по одному, каждый с коммитом и проверкой.

Отдать reports/fix-report.md + ссылки на коммиты.

Формат ответа: краткая сводка статуса по разделам → ссылки на коммиты/дифы → как проверять (шаги/curl).